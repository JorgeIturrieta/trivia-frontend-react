(this["webpackJsonpreact-trivia"]=this["webpackJsonpreact-trivia"]||[]).push([[0],{108:function(e,n,t){},109:function(e,n,t){"use strict";t.r(n);var r,c,a,o,i,s,d,l,j,b,u,p,g,x,O,h,m,f,v,k,w,I,S,y,C,Q=t(17),F=t(3),z=t(54),L=t.n(z),U=t(27),$=t(7),q=t(49),T=t(1),A=["children","isLoggedIn"],E=function(e){var n=e.children,t=e.isLoggedIn,r=Object(q.a)(e,A);return Object(T.jsx)($.b,Object(Q.a)(Object(Q.a)({},r),{},{render:function(e){var r=e.location;return t?Object(T.jsx)($.a,{to:{pathname:"/",state:{from:r}}}):n}}))},N=t(30),R=t.n(N),D=t(37),J=t(14),M=t(116),Y=t(124),G=t(43),P=function(e){var n=Object(F.useState)(e),t=Object(J.a)(n,2),r=t[0],c=t[1];return Object(Q.a)(Object(Q.a)({},r),{},{onChange:function(e,n){c(Object(Q.a)(Object(Q.a)({},r),{},Object(G.a)({},e,n)))}})},B=t(5),H=t(121),V=Object(H.a)(r||(r=Object(B.a)(["\n  mutation login($loginInput: LoginInput!) {\n    login(loginInput: $loginInput) {\n      token\n    }\n  }\n"]))),_=t(120),K=t(38),W=Object(K.c)(!!localStorage.getItem("token")),X=Object(K.c)(0),Z=Object(K.c)(0),ee=new _.a({typePolicies:{Query:{fields:{isLoggedIn:{read:function(){return W()}},userScore:{read:function(){return X()}},userTime:{read:function(){return Z()}}}}}}),ne=t(11),te=ne.a.div(c||(c=Object(B.a)(["\n  display: flex;\n  background-color: #5c62c5;\n  align-items: center;\n  justify-content: center;\n  width: 100vw;\n  height: 100vh;\n"]))),re=ne.a.div(a||(a=Object(B.a)(["\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  padding: 20px;\n  width: 250px;\n  background-color: white;\n  border-radius: 7px;\n  -webkit-box-shadow: 0px 9px 28px 0px rgba(0, 0, 0, 0.75);\n  -moz-box-shadow: 0px 9px 28px 0px rgba(0, 0, 0, 0.75);\n  box-shadow: 0px 9px 28px 0px rgba(0, 0, 0, 0.75);\n"]))),ce=ne.a.input(o||(o=Object(B.a)(["\n  border: 1px solid grey;\n  width: 100%;\n  margin-bottom: 10px;\n  padding: 7px 3px;\n  border-radius: 5px;\n"]))),ae=ne.a.button(i||(i=Object(B.a)(["\n  padding: 7px 3px;\n  color: white;\n  border: 3px;\n  background-color: #5c62c5;\n  width: 100%;\n  display: block;\n  margin-bottom: 1em;\n  border-radius: 5px;\n"]))),oe=ne.a.h1(s||(s=Object(B.a)(["\n  color: #5c62c5;\n  font-size: 500;\n"]))),ie=function(){var e=Object(M.a)(),n=P({email:"test@test.com",password:"12345"}),t=n.email,r=n.password,c=n.onChange,a=Object(Y.a)(V,{variables:{loginInput:{password:r,username:t}}}),o=Object(J.a)(a,2),i=o[0],s=o[1],d=s.data,l=s.error;Object(F.useEffect)((function(){(null===d||void 0===d?void 0:d.login)&&(localStorage.setItem("token",d.login.token),W(!!localStorage.getItem("token")))}),[d]);var j=function(){var n=Object(D.a)(R.a.mark((function n(t){return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.prev=1,n.next=4,i();case 4:return n.next=6,e.resetStore();case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}();return Object(T.jsx)(te,{children:Object(T.jsxs)(re,{children:[Object(T.jsx)(oe,{children:"Trivia App"}),Object(T.jsxs)("form",{onSubmit:j,children:[Object(T.jsx)(ce,{type:"text",name:"email",placeholder:"correo",value:t,autoComplete:"off",onChange:function(e){var n=e.target;return c("email",n.value)}}),Object(T.jsx)(ce,{type:"password",name:"password",placeholder:"contrase\xf1a",value:r,onChange:function(e){var n=e.target;return c("password",n.value)}}),Object(T.jsx)(ae,{type:"submit",children:" Iniciar sesi\xf3n "}),Object(T.jsx)("hr",{}),Object(T.jsx)(U.b,{to:"/register",className:"link",children:"Registrarse"})]}),l?Object(T.jsxs)("p",{children:["Oh no! ",JSON.stringify(l.message,null,2)]}):null]})})},se=["children","isLoggedIn"],de=function(e){var n=e.children,t=e.isLoggedIn,r=Object(q.a)(e,se);return Object(T.jsx)($.b,Object(Q.a)(Object(Q.a)({},r),{},{render:function(e){var r=e.location;return t?n:Object(T.jsx)($.a,{to:{pathname:"/login",state:{from:r}}})}}))},le=t(122),je=Object(H.a)(d||(d=Object(B.a)(["\n  query GetCategory {\n    getCategories {\n      name\n      id\n    }\n  }\n"]))),be=t(78),ue=function(e){var n=e.categories;return Object(T.jsx)(be.Carousel,{children:n.map((function(e){return Object(T.jsxs)("div",{children:[Object(T.jsx)("img",{src:"https://res.cloudinary.com/dhklxujxz/image/upload/v1632090154/trivia/ginobili_qmqciw.jpg",alt:e.name}),Object(T.jsx)(U.b,{to:"./questions/".concat(e.id),children:Object(T.jsx)("p",{className:"legend",children:e.name})})]},e.id)}))})},pe=function(){var e=Object(le.a)(je),n=e.loading,t=e.data;return Object(T.jsxs)(T.Fragment,{children:[n&&Object(T.jsx)("p",{children:"Cargando..."}),t&&Object(T.jsx)(ue,{categories:null===t||void 0===t?void 0:t.getCategories})]})},ge=ne.a.header(l||(l=Object(B.a)(["\n  background-color: #8cc7f7;\n  padding: 0.5em 2em;\n  width: 100%;\n  position: sticky;\n  top: 0;\n  overflow: hidden;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  h1 {\n    text-decoration: none;\n    display: inline-block;\n    margin: 0;\n    text-align: left;\n    font-size: clamp(1.5rem, 2.5vw, 2rem);\n  }\n\n  span {\n    cursor: pointer;\n    font-size: clamp(0.7rem, 2.5vw, 1rem);\n  }\n"]))),xe=ne.a.h1(j||(j=Object(B.a)(["\n  margin: 0;\n  text-align: center;\n  font-size: clamp(1.5rem, 2.5vw, 2rem);\n"]))),Oe=ne.a.div(b||(b=Object(B.a)(["\n  display: grid;\n  max-width: 500px;\n  margin: 0 auto;\n  border-radius: 5px;\n  grid-gap: 0.5rem;\n  padding: 2px 10px;\n"]))),he=ne.a.div(u||(u=Object(B.a)(["\n  border-radius: inherit;\n  background-color: #8cc7f7;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(12rem, 1fr));\n"]))),me=ne.a.div(p||(p=Object(B.a)(["\n  text-align: center;\n  padding: 1rem;\n"]))),fe=ne.a.div(g||(g=Object(B.a)(["\n  border-radius: 5px;\n  position: relative;\n  z-index: -1;\n"]))),ve=ne.a.p(x||(x=Object(B.a)(["\n  position: absolute;\n  color: white;\n  left: 0;\n  margin: 10px;\n  background-color: red;\n  padding: 5px 8px;\n  border-radius: 10px;\n  border: 2px solid;\n"]))),ke=ne.a.p(O||(O=Object(B.a)(["\n  position: absolute;\n  color: white;\n  right: 0;\n  //text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;\n  bottom: 0;\n  margin: 10px;\n  background-color: green;\n  padding: 5px 8px;\n  border: 2px solid;\n  border-radius: 10px;\n"]))),we=ne.a.p(h||(h=Object(B.a)(["\n  position: absolute;\n  background-color: green;\n  border: 2px solid;\n  color: white;\n  right: 0;\n  margin: 10px;\n  padding: 5px 5px;\n  border-radius: 10px;\n"]))),Ie=ne.a.img(m||(m=Object(B.a)(["\n  width: 100%;\n  object-fit: cover;\n  border-radius: inherit;\n"]))),Se=ne.a.div(f||(f=Object(B.a)(["\n  /* background-color: #393e46; */\n  margin-top: 1em;\n  background-color: ",";\n  color: ",";\n  padding: 0.5rem;\n  text-align: center;\n  border-radius: inherit;\n  //font-size: clamp(1rem, 2.5vw, 2em);\n"])),(function(e){return e.backgroundColor?e.backgroundColor:"#393e46"}),(function(e){return e.backgroundColor?"black":"white"})),ye=function(){return Object(T.jsx)("div",{children:Object(T.jsx)("span",{onClick:function(){localStorage.removeItem("token"),W(!!localStorage.getItem("token"))},children:"Cerrar Sesi\xf3n"})})},Ce=function(){return Object(T.jsxs)(ge,{children:[Object(T.jsx)(U.c,{to:"/",className:"tags",activeStyle:{color:"black"},children:Object(T.jsx)("h1",{children:"Trivia App"})}),Object(T.jsx)(ye,{})]})},Qe=function(){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ce,{}),Object(T.jsx)(pe,{})]})},Fe=t(117),ze=Object(H.a)(v||(v=Object(B.a)(["\n  query GetRandomQuestions($randomInput: RandomInput!) {\n    randomQuestions(randomInput: $randomInput) {\n      title\n      correctAnswer\n      image\n      answers {\n        id\n        title\n      }\n    }\n  }\n"]))),Le=ne.a.button(k||(k=Object(B.a)(["\n  background-color: ",";\n  border: 3px solid white;\n  width: 200px;\n  color: ",";\n  border-radius: 5px;\n  padding: 1em;\n  font-size: 1rem;\n  cursor: pointer;\n"])),(function(e){return e.inputColor?e.inputColor:"#393e46"}),(function(e){return e.inputColor?"black":"white"})),Ue=ne.a.button(w||(w=Object(B.a)(["\n  padding-top: 1rem;\n  background-color: #393e46;\n  color: white;\n  font-size: 1em;\n  margin: 1em;\n  border: 0;\n  padding: 1em 1em;\n  border-radius: 10px;\n  cursor: pointer;\n"]))),$e=function(e){var n=Math.floor(e/60);e%=60;var t=Math.floor(n/60);return n%=60,"".concat(String(t).padStart(2,"0"),":").concat(String(n).padStart(2,"0"),":").concat(String(e).padStart(2,"0"))},qe=function(e){var n=e.time,t=e.setTime,r=Object(F.useState)(),c=Object(J.a)(r,2),a=c[0],o=c[1];return Object(F.useEffect)((function(){var e=setInterval((function(){t((function(e){return e+1}))}),1e3);return o(e),function(){a&&clearInterval(a)}}),[]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(ke,{children:Object(T.jsx)("span",{children:$e(n)})})})},Te=function(e){var n=e.question,t=e.setNextQuestion,r=e.numberQuestion,c=Object(F.useState)(!1),a=Object(J.a)(c,2),o=a[0],i=a[1],s=Object(F.useState)(0),d=Object(J.a)(s,2),l=d[0],j=d[1],b=Object(F.useState)(""),u=Object(J.a)(b,2),p=u[0],g=u[1],x=Object(F.useState)(""),O=Object(J.a)(x,2),h=O[0],m=O[1],f=Object(F.useState)(!1),v=Object(J.a)(f,2),k=v[0],w=v[1],I=Object(F.useState)(0),S=Object(J.a)(I,2),y=S[0],C=S[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Se,{backgroundColor:h,children:Object(T.jsx)(xe,{children:n.title})}),Object(T.jsxs)(fe,{children:[Object(T.jsxs)(ve,{children:[r,"/10"]}),Object(T.jsx)(qe,{time:y,setTime:C}),Object(T.jsxs)(we,{children:[l," puntos"]}),Object(T.jsx)(Ie,{src:n.image,alt:n.title})]}),Object(T.jsx)(he,{children:n.answers.map((function(e){return Object(T.jsx)(me,{children:Object(T.jsx)(Le,{inputColor:(e.id===p?h:"")||(e.id===n.correctAnswer&&k?"#48e3b0":""),onClick:function(){return t=e.id,void(o||(w(!0),i(!0),g(t),t===n.correctAnswer?(j(l+10),m("#48e3b0"),console.log("Respuesta correcta :)")):m("#E55665")));var t},children:e.title},e.id)},e.id)}))}),o&&Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(Ue,{onClick:function(){m(""),t((function(e){return e+1})),X(l),Z(y),i(!1),w(!1)},children:"Continuar"})})]})},Ae=Object(H.a)(I||(I=Object(B.a)(["\n  mutation addScore($scoreInput: ScoreInput!) {\n    addScore(scoreInput: $scoreInput) {\n      score\n    }\n  }\n"]))),Ee=function(){var e=Object($.g)().categoryId,n=Object(le.a)(ze,{variables:{randomInput:{idCategory:e}}}),t=n.loading,r=n.data,c=n.error,a=Object(F.useState)(0),o=Object(J.a)(a,2),i=o[0],s=o[1],d=Object(Fe.a)(X),l=Object(Fe.a)(Z),j=Object(Y.a)(Ae,{variables:{scoreInput:{idCategory:e,time:l,score:d}}}),b=Object(J.a)(j,1)[0],u=Object(F.useCallback)(Object(D.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:case"end":return e.stop()}}),e)}))),[b]);return Object(F.useEffect)((function(){return(null===r||void 0===r?void 0:r.randomQuestions.length)&&(null===r||void 0===r?void 0:r.randomQuestions.length)-1<i&&u(),function(){console.log("componente desmontado")}}),[i,r,u]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ce,{}),t?Object(T.jsx)("p",{children:"Cargando..."}):Object(T.jsx)(Oe,{children:(null===r||void 0===r?void 0:r.randomQuestions)&&Object(T.jsxs)(T.Fragment,{children:[(null===r||void 0===r?void 0:r.randomQuestions.length)-1>=i&&Object(T.jsx)(Te,{question:null===r||void 0===r?void 0:r.randomQuestions[i],setNextQuestion:s,numberQuestion:i+1}),r.randomQuestions.length>0&&(null===r||void 0===r?void 0:r.randomQuestions.length)-1<i&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("p",{children:"\xa1Felcitaciones trivia completada!"}),Object(T.jsx)(U.b,{to:"/scores/".concat(e),children:"Ver resultados"})]}),0===r.randomQuestions.length&&Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("p",{children:"Esta categor\xeda aun no tiene pregutas"})})]})}),c&&Object(T.jsx)("span",{children:c.message})]})},Ne=Object(H.a)(S||(S=Object(B.a)(["\n  mutation signUp($signUpInput: SignUpInput!) {\n    signUp(signUpInput: $signUpInput) {\n      token\n    }\n  }\n"]))),Re=function(){var e=Object(M.a)(),n=P({username:"",email:"",password:""}),t=n.username,r=n.email,c=n.password,a=n.onChange,o=Object(Y.a)(Ne,{variables:{signUpInput:{password:c,username:t,email:r}}}),i=Object(J.a)(o,2),s=i[0],d=i[1],l=d.data,j=d.error;Object(F.useEffect)((function(){(null===l||void 0===l?void 0:l.signUp)&&(localStorage.setItem("token",l.signUp.token),W(!!localStorage.getItem("token")))}),[l]);var b=function(){var n=Object(D.a)(R.a.mark((function n(t){return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.prev=1,n.next=4,s();case 4:return n.next=6,e.resetStore();case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}();return Object(T.jsx)(te,{children:Object(T.jsxs)(re,{children:[Object(T.jsx)(oe,{children:"Trivia App"}),Object(T.jsxs)("form",{onSubmit:b,children:[Object(T.jsx)(ce,{type:"text",name:"username",placeholder:"nombre de usuario",value:t,autoComplete:"off",onChange:function(e){var n=e.target;return a("username",n.value)}}),Object(T.jsx)(ce,{type:"text",name:"email",placeholder:"correo",value:r,autoComplete:"off",onChange:function(e){var n=e.target;return a("email",n.value)}}),Object(T.jsx)(ce,{type:"password",name:"password",placeholder:"contrase\xf1a",value:c,onChange:function(e){var n=e.target;return a("password",n.value)}}),Object(T.jsx)(ae,{type:"submit",children:" Registrar "})]}),j?Object(T.jsxs)("p",{children:["Oh no! ",JSON.stringify(j.message,null,2)]}):null]})})},De=Object(H.a)(y||(y=Object(B.a)(["\n  query GetScores($searchScoreInput: SearchScoreInput!) {\n    getScores(searchScoreInput: $searchScoreInput) {\n      createdAt\n      time\n      score\n      user {\n        name\n      }\n    }\n  }\n"]))),Je=ne.a.div(C||(C=Object(B.a)(["\n  padding: 1rem;\n  overflow-x: auto;\n  margin: 0 20px;\n  table {\n    border-spacing: 0;\n    border: 1px solid black;\n\n    margin-left: auto;\n    margin-right: auto;\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    th,\n    td {\n      margin: 0;\n      text-align: center;\n      padding: 0.5rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n"]))),Me=t(79),Ye=t.n(Me),Ge=function(){var e=Object($.g)().categoryId,n=Object(le.a)(De,{variables:{searchScoreInput:{idCategory:e}},fetchPolicy:"no-cache"}),t=n.loading,r=n.data,c=n.error;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ce,{}),Object(T.jsx)(xe,{children:"Tabla de puntuaciones"}),t&&Object(T.jsx)("p",{children:"Cargando..."}),r&&Object(T.jsx)(Je,{children:Object(T.jsxs)("table",{children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Ranking"}),Object(T.jsx)("th",{children:"Usuario"}),Object(T.jsx)("th",{children:"Puntuaci\xf3n"}),Object(T.jsx)("th",{children:"Tiempo"}),Object(T.jsx)("th",{children:"Fecha"})]})}),Object(T.jsx)("tbody",{children:r.getScores.map((function(e,n){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:n+1}),Object(T.jsx)("td",{children:e.user.name}),Object(T.jsx)("td",{children:e.score}),Object(T.jsx)("td",{children:$e(e.time)}),Object(T.jsx)("td",{children:Ye.a.utc(e.createdAt).local().format("DD-MM-YYYY HH:mm:ss ")})]},n)}))})]})}),c&&Object(T.jsx)("span",{children:c.message})]})},Pe=function(){var e=Object(Fe.a)(W);return console.log(e),Object(T.jsx)(U.a,{children:Object(T.jsx)("div",{children:Object(T.jsxs)($.d,{children:[Object(T.jsx)(E,{exact:!0,path:"/login",isLoggedIn:e,children:Object(T.jsx)(ie,{})}),Object(T.jsx)(E,{exact:!0,path:"/register",isLoggedIn:e,children:Object(T.jsx)(Re,{})}),Object(T.jsx)(de,{exact:!0,path:"/",isLoggedIn:e,children:Object(T.jsx)(Qe,{})}),Object(T.jsx)(de,{exact:!0,path:"/questions/:categoryId",isLoggedIn:e,children:Object(T.jsx)(Ee,{})}),Object(T.jsx)(de,{exact:!0,path:"/scores/:categoryId",isLoggedIn:e,children:Object(T.jsx)(Ge,{})}),Object(T.jsx)($.a,{to:"/"})]})})})},Be=function(){return Object(T.jsx)(Pe,{})},He=t(81),Ve=t(119),_e=t(118),Ke=t(80),We=(t(107),t(108),Object(He.a)({uri:"https://trivia-backend-jorge.herokuapp.com/"})),Xe=Object(Ke.a)((function(e,n){var t=n.headers,r=localStorage.getItem("token");return{headers:Object(Q.a)(Object(Q.a)({},t),{},{authorization:r?"Bearer ".concat(r):""})}})),Ze=new Ve.a({link:Xe.concat(We),cache:ee,name:"Trivia",version:"1.0"});L.a.render(Object(T.jsx)(_e.a,{client:Ze,children:Object(T.jsx)(Be,{})}),document.getElementById("root"))}},[[109,1,2]]]);
//# sourceMappingURL=main.e3706df8.chunk.js.map